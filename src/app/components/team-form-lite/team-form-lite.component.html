<section class="relative flex items-center justify-center py-10 px-4 md:px-6 bg-cover bg-center"
  style="background-image: url('assets/images/bg-form.jpeg');">
  <!-- Gradiente de fondo -->
  <div class="absolute inset-0 bg-gradient-to-b from-white to-transparent"></div>

  <!-- Contenedor principal -->
  <div class="relative max-w-6xl w-full grid grid-cols-1 lg:grid-cols-2 gap-8 items-center px-2 md:px-6">

    <!-- Columna izquierda: Imagen o texto -->
    <div class="flex justify-center">
      <div class="relative w-full grid grid-cols-1 gap-8 items-center animate__animated animate__bounceInLeft">
        <div class="flex justify-center px-2 sm:px-4 lg:px-0">

          <!-- Imagen -->
          <img *ngIf="imageURL" [src]="imageURL" alt="" class="w-[300px] md:w-[400px] lg:w-[450px] max-w-full h-auto" />

          <!-- Texto alternativo -->
          <div *ngIf="!imageURL" class="text-center lg:text-left space-y-4">
            <h2 class="text-xl font-bold" [ngClass]="orange ? 'text-orange-500' : 'text-purple-700'">
              {{ 'formSection.maximizePotential' | translate }}
            </h2>

            <p class="text-base md:text-lg">
              {{ 'formSection.satelliteOfficeComplexity' | translate }}
            </p>
            <p class="text-base md:text-lg">
              {{ 'formSection.hardwareSoftwareSupport' | translate }}
            </p>

            <p class="text-xl font-bold mt-4">
              {{ 'formSection.turnSatelliteIntoPowerhouse' | translate }}
            </p>
          </div>

        </div>
      </div>
    </div>

    <!-- Columna derecha: Formulario -->
    <div class="space-y-6 animate__animated animate__fadeInRight px-2 sm:px-4">

      <!-- Título del formulario -->
      <h2 *ngIf="title" class="text-2xl md:text-3xl text-center font-extrabold uppercase"
        [ngClass]="orange ? 'text-purple-700' : 'text-orange-500'">
        {{ title | translate }}
      </h2>

      <!-- Formulario -->
      <form *ngIf="!formSubmitted" [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Email -->
          <div class="col-span-1 md:col-span-2">
            <input formControlName="email" type="email" placeholder="{{ 'formSection.companyEmail' | translate }}"
              [class.border-red-500]="isFieldInvalid('email')"
              [class.border-green-500]="form.get('email')?.valid && form.get('email')?.touched"
              class="input-field w-full transition-all duration-300" />
            <div *ngIf="isFieldInvalid('email')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('email') }}</span>
            </div>
          </div>

          <!-- First Name -->
          <div class="col-span-1">
            <input formControlName="firstName" type="text" placeholder="{{ 'formSection.firstName' | translate }}"
              [class.border-red-500]="isFieldInvalid('firstName')"
              [class.border-green-500]="form.get('firstName')?.valid && form.get('firstName')?.touched"
              class="input-field w-full transition-all duration-300" />
            <div *ngIf="isFieldInvalid('firstName')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('firstName') }}</span>
            </div>
          </div>

          <!-- Last Name -->
          <div class="col-span-1">
            <input formControlName="lastName" type="text" placeholder="{{ 'formSection.lastName' | translate }}"
              [class.border-red-500]="isFieldInvalid('lastName')"
              [class.border-green-500]="form.get('lastName')?.valid && form.get('lastName')?.touched"
              class="input-field w-full transition-all duration-300" />
            <div *ngIf="isFieldInvalid('lastName')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('lastName') }}</span>
            </div>
          </div>

          <!-- Company -->
          <div class="col-span-1">
            <input formControlName="company" type="text" placeholder="{{ 'formSection.companyName' | translate }}"
              [class.border-red-500]="isFieldInvalid('company')"
              [class.border-green-500]="form.get('company')?.valid && form.get('company')?.touched"
              class="input-field w-full transition-all duration-300" />
            <div *ngIf="isFieldInvalid('company')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('company') }}</span>
            </div>
          </div>

          <!-- Phone -->
          <div class="col-span-1">
            <input formControlName="phone" type="text" placeholder="{{ 'formSection.phoneNumber' | translate }}"
              [class.border-red-500]="isFieldInvalid('phone')"
              [class.border-green-500]="form.get('phone')?.valid && form.get('phone')?.touched"
              class="input-field w-full transition-all duration-300" />
            <div *ngIf="isFieldInvalid('phone')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('phone') }}</span>
            </div>
          </div>

          <!-- Solution -->
          <div class="col-span-1 md:col-span-2">
            <select formControlName="solution"
              [class.border-red-500]="isFieldInvalid('solution')"
              [class.border-green-500]="form.get('solution')?.valid && form.get('solution')?.touched"
              class="input-field w-full transition-all duration-300">
              <option value="">{{ 'formSection.selectSolution' | translate }}</option>
              <ng-container *ngFor="let sol of solutions">
                <option [value]="sol">{{ sol }}</option>
              </ng-container>
            </select>
            <div *ngIf="isFieldInvalid('solution')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('solution') }}</span>
            </div>
          </div>

          <!-- State -->
          <div class="col-span-1">
            <input formControlName="state" type="text" placeholder="{{ 'formSection.state' | translate }}"
              [class.border-red-500]="isFieldInvalid('state')"
              [class.border-green-500]="form.get('state')?.valid && form.get('state')?.touched"
              class="input-field w-full transition-all duration-300" />
            <div *ngIf="isFieldInvalid('state')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('state') }}</span>
            </div>
          </div>

          <!-- Source -->
          <div class="col-span-1">
            <input formControlName="source" type="text" placeholder="{{ 'formSection.howDidYouHear' | translate }}"
              [class.border-red-500]="isFieldInvalid('source')"
              [class.border-green-500]="form.get('source')?.valid && form.get('source')?.touched"
              class="input-field w-full transition-all duration-300" />
            <div *ngIf="isFieldInvalid('source')" class="mt-1 text-sm text-red-600 flex items-center gap-1 animate__animated animate__fadeIn animate__faster">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
              <span>{{ getErrorMessage('source') }}</span>
            </div>
          </div>

          <!-- Comments -->
          <div class="col-span-1 md:col-span-2">
            <textarea formControlName="comments" rows="4"
              placeholder="{{ 'formSection.commentsPlaceholder' | translate }}"
              class="input-field w-full transition-all duration-300"></textarea>
          </div>
        </div>


        <!-- Política -->
        <div class="flex items-center text-sm text-gray-600 space-x-2">
          <input type="checkbox" id="acceptPolicy" class="w-4 h-4" required />
          <label for="acceptPolicy">
            {{ 'formSection.acceptPolicyLabel' | translate }}
            <a routerLink="/terms-and-conditions" class="text-purple-700 font-semibold">
              {{ 'formSection.dataProtectionPolicy' | translate }}
            </a>
          </label>
        </div>

        <!-- Botón -->
        <button type="submit"
          [disabled]="isSubmitting"
          class="bg-purple-700 text-white font-bold px-6 py-3 rounded-md hover:bg-purple-800 w-full md:w-auto transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
          <svg *ngIf="isSubmitting" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <span>{{ isSubmitting ? ('formSection.sending' | translate) : ('formSection.letsTalkButton' | translate) }}</span>
        </button>
      </form>

      <!-- Confirmación -->
      <div *ngIf="formSubmitted"
        class="relative flex justify-center items-center flex-col mt-6 p-4 animate__animated animate__bounceIn animate__faster">
        <h3 class="text-xl font-bold">
          {{ 'formSection.confirmationTitle' | translate }}
        </h3>
        <fa-icon [icon]="faCheck" class="text-7xl mt-2 text-green-500 m-4"></fa-icon>
        <p class="text-gray-600 text-lg text-center">
          {{ 'formSection.confirmationMessage' | translate }}
        </p>
      </div>

    </div>
  </div>
</section>
