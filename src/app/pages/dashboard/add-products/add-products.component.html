<div class="container mx-auto p-4">
  <h1 class="text-4xl font-bold text-center mb-8 text-indigo-700 animate__animated animate__fadeInDown">
    Gestión de Productos
  </h1>

  <div *ngIf="loading" class="text-center text-lg text-gray-600 animate__animated animate__flash animate__infinite">
    Cargando productos...
  </div>

  <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 animate__animated animate__shakeX" role="alert">
    <strong class="font-bold">Error:</strong>
    <span class="block sm:inline"> {{ error }}</span>
  </div>

  <div *ngIf="!loading && !error && products.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let product of products"
         class="bg-white rounded-lg shadow-xl overflow-hidden transform transition-transform hover:scale-105 animate__animated animate__fadeInUp">
      <img [src]="product.imagen" [alt]="product.nombre" class="w-full h-48 object-cover">
      <div class="p-6">
        <h2 class="text-2xl font-semibold text-gray-800 mb-2">{{ product.nombre }}</h2>
        <p class="text-gray-600 mb-3 text-sm">{{ product.descripcion }}</p>

        <div class="flex items-center mb-2">
          <fa-icon [icon]="faTag" class="text-indigo-500 mr-2"></fa-icon>
          <span class="font-medium">SKU:</span> {{ product.SKU }}
        </div>

        <div class="flex items-center mb-2">
          <fa-icon [icon]="faMoneyBillWave" class="text-green-500 mr-2"></fa-icon>
          <span class="font-medium">Precio:</span>
          <span class="text-green-600 font-bold ml-1">
            {{ product.precio | currency:'USD':'symbol':'1.0-2' }}
          </span>
          <span *ngIf="product.precioRetail" class="text-gray-400 line-through ml-2 text-sm">
            {{ product.precioRetail | currency:'USD':'symbol':'1.0-2' }}
          </span>
        </div>

        <div class="flex items-center mb-2">
          <fa-icon [icon]="faBoxesStacked" class="text-blue-500 mr-2"></fa-icon>
          <span class="font-medium">Cantidad:</span> {{ product.cantidad }}
        </div>

        <div class="flex items-center mb-2">
          <fa-icon [icon]="product.disponibilidad ? faCheckCircle : faTimesCircle"
                   [class.text-green-500]="product.disponibilidad"
                   [class.text-red-500]="!product.disponibilidad"
                   class="mr-2"></fa-icon>
          <span class="font-medium">Disponibilidad:</span>
          <span [class.text-green-600]="product.disponibilidad"
                [class.text-red-600]="!product.disponibilidad"
                class="ml-1 font-semibold">
            {{ product.disponibilidad ? 'En Stock' : 'Agotado' }}
          </span>
        </div>

        <div class="text-sm text-gray-500 mt-4 border-t pt-4">
          <p><strong>Marca:</strong> {{ product.marca }}</p>
          <p><strong>Categoría:</strong> {{ product.categoria }}</p>
          <p><strong>Almacén:</strong> {{ product.warehouse }} ({{ product.warehouseId }})</p>
          <div *ngIf="product.etiquetas.length > 0">
            <strong>Etiquetas:</strong>
            <span *ngFor="let tag of product.etiquetas"
                  class="inline-block bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full ml-2">
              {{ tag }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && !error && products.length === 0" class="text-center text-lg text-gray-600 mt-8 animate__animated animate__fadeIn">
    No se encontraron productos.
  </div>
</div>
