<div
  class="group bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden flex flex-col">

  <!-- Card Header -->
  <div class="p-5 border-b border-gray-50 bg-gradient-to-r from-gray-50 to-white">
    <div class="flex justify-between items-start gap-3">
      <div class="flex items-start gap-3 overflow-hidden">
        <div
          class="p-2 bg-purple-100 rounded-lg text-purple-600 group-hover:bg-purple-600 group-hover:text-white transition-colors duration-300 shrink-0">
          <fa-icon [icon]="faReceipt" class="text-lg"></fa-icon>
        </div>
        <div class="min-w-0">
          <h2 class="text-base font-bold text-gray-900 truncate leading-tight mb-1"
            [title]="'Orden ' + order.numeroOrden">
            Orden #{{ order.numeroOrden }}
          </h2>
          <div *ngIf="user" class="flex items-center gap-1.5 text-xs text-gray-500">
            <fa-icon [icon]="faUser" class="text-gray-400"></fa-icon>
            <span class="truncate">{{ user.name }}</span>
          </div>
        </div>
      </div>
      <span [ngClass]="estadoPagoClass"
        class="shrink-0 text-xs font-bold px-2.5 py-1 rounded-full uppercase tracking-wide shadow-sm">
        {{ order.estadoPago === 'pagado' ? 'Procesado' : order.estadoPago.replace('_', ' ') }}
      </span>
    </div>
  </div>

  <!-- Card Body -->
  <div class="p-5 space-y-4 flex-1">
    <!-- Precio Total -->
    <div class="flex items-center justify-between p-3 bg-purple-50 rounded-xl border border-purple-100">
      <div class="flex items-center gap-2">
        <fa-icon [icon]="faDollarSign" class="text-purple-600"></fa-icon>
        <span class="text-sm font-semibold text-gray-700">Total</span>
      </div>
      <p class="text-lg font-bold text-purple-700">${{ order.precioTotal | number:'1.2-2' }}</p>
    </div>

    <!-- Items Count -->
    <div class="flex items-center gap-2 text-sm text-gray-600">
      <fa-icon [icon]="faShoppingCart" class="text-gray-400"></fa-icon>
      <span class="font-medium">{{ order.productos.length }} producto{{ order.productos.length !== 1 ? 's' : ''
        }}</span>
    </div>

    <!-- Fecha -->
    <div class="bg-gray-50 rounded-xl p-3 border border-gray-100">
      <div class="flex items-center gap-2 mb-1">
        <fa-icon [icon]="faCalendarAlt" class="text-xs text-gray-400"></fa-icon>
        <p class="text-xs text-gray-500 font-semibold">Fecha de Creaci√≥n</p>
      </div>
      <p class="text-sm font-bold text-gray-700">
        {{ order.fecha | date:'dd MMM yyyy, h:mm a' }}
      </p>
    </div>
  </div>

  <!-- Card Footer / Actions -->
  <div class="p-4 bg-gray-50 border-t border-gray-100">
    <div class="flex flex-wrap gap-2">
      <!-- Ver Detalles Button -->
      <button (click)="view.emit(order)"
        class="flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium text-gray-600 hover:bg-white hover:text-purple-600 transition-all duration-200 border border-transparent hover:border-gray-100"
        title="Ver detalles">
        <fa-icon [icon]="faEye"></fa-icon>
        <span>Ver Detalles</span>
      </button>

      <!-- Procesar Button (only for unpaid orders and admins) -->
      <button *ngIf="order.estadoPago !== 'pagado' && role === Role.Admin && isLoggedIn"
        (click)="markAsPaid.emit(order)"
        class="flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium text-white bg-green-600 hover:bg-green-700 transition-all duration-200"
        title="Procesar orden">
        <fa-icon [icon]="faCheck"></fa-icon>
        <span>Procesar</span>
      </button>
    </div>
  </div>
</div>