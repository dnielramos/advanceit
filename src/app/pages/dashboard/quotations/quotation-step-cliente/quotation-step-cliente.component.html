<div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-slate-200">
  <h2 class="text-3xl font-bold text-slate-800 mb-2">Información del Cliente</h2>
  <p class="text-slate-500 mb-8">Selecciona o confirma los datos para iniciar la cotización.</p>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">

    <ng-container *ngIf="userRole === Role.Admin">
      <div>
        <label for="company_id" class="block text-sm font-semibold text-slate-700 mb-1">Empresa Asociada</label>
        <select id="company_id" formControlName="company_id" (change)="onSelectionMade()"
          class="mt-1 p-3 w-full rounded-lg border-slate-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 transition">
          <option [ngValue]="null" disabled>-- Selecciona una empresa --</option>
          <option *ngFor="let company of companies$ | async" [ngValue]="company.id">{{ company.razon_social }}</option>
        </select>
      </div>
      <div>
        <label for="user_id" class="block text-sm font-semibold text-slate-700 mb-1">Usuario Asignado</label>
        <select id="user_id" formControlName="user_id" (change)="onSelectionMade()"
          class="mt-1 p-3 w-full rounded-lg border-slate-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 transition">
          <option [ngValue]="null" disabled>-- Selecciona un usuario --</option>
          <option *ngFor="let user of users$ | async" [ngValue]="user.id">{{ user.name }} ({{ user.email }})</option>
        </select>
      </div>
    </ng-container>

    <ng-container *ngIf="userRole === Role.User && selectedUser && selectedCompany">
      <div>
        <label class="block text-sm font-semibold text-slate-700 mb-1">Tu Empresa</label>
        <input type="text" [value]="selectedCompany.razon_social"
          class="mt-1 p-3 w-full bg-slate-100 rounded-lg border-slate-300 cursor-not-allowed" disabled>
      </div>
      <div>
        <label class="block text-sm font-semibold text-slate-700 mb-1">Tu Usuario</label>
        <input type="text" [value]="selectedUser.name"
          class="mt-1 p-3 w-full bg-slate-100 rounded-lg border-slate-300 cursor-not-allowed" disabled>
      </div>
    </ng-container>

    <div>
      <label for="validity_days" class="block text-sm font-semibold text-slate-700 mb-1">Validez de la Oferta</label>
      <select id="validity_days" formControlName="validity_days" (change)="onSelectionMade()"
        class="mt-1 p-3 w-full rounded-lg border-slate-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 transition">
        <option [ngValue]="15">15 días</option>
        <option [ngValue]="30">30 días</option>
      </select>
    </div>
    <div>
      <label for="term" class="block text-sm font-semibold text-slate-700 mb-1">Condiciones de Pago</label>
      <input *ngIf="userRole === Role.User" type="text" formControlName="term"
        class="mt-1 p-3 w-full bg-slate-100 rounded-lg border-slate-300 cursor-not-allowed" [disabled]="true"
        [value]="selectedCompany?.condiciones_pago === '0' ? 'Contado' : selectedCompany?.condiciones_pago + ' días de crédito'">
      <select *ngIf="userRole === Role.Admin" id="term" formControlName="term" (change)="onSelectionMade()"
        class="mt-1 p-3 w-full rounded-lg border-slate-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 transition">
        <option value="Contado">Contado</option>
        <option value="30">Crédito 30 días</option>
        <option value="60">Crédito 60 días</option>
      </select>
    </div>
  </div>
</div>
