<!-- Contenedor principal con una altura de pantalla completa y diseño flexible -->
<div class="w-70 h-[100dvh] bg-white shadow-xl rounded-lg flex flex-col font-sans animate__animated animate__fadeInLeft animate__faster">
  
  <!-- Logo -->
  <div class="flex p-4 items-center border-b flex-shrink-0">
    <img src="logo.png" alt="Advance Technology Projects" class="h-10" />
  </div>

  <!-- Contenedor del contenido principal que ocupará el espacio restante -->
  <div class="flex flex-col flex-grow overflow-hidden">
    
    <!-- Toggle para cambiar entre Categorías y Marcas -->
    <div class="flex p-2 border-b">
      <button 
        (click)="setActiveView('categories')"
        [ngClass]="{
          'bg-purple-600 text-white shadow-md': activeView() === 'categories',
          'bg-gray-100 text-gray-600 hover:bg-gray-200': activeView() !== 'categories'
        }"
        class="flex-1 p-2 rounded-md font-semibold text-sm transition-all duration-200 ease-in-out flex items-center justify-center gap-2">
        <fa-icon [icon]="faLayerGroup"></fa-icon>
        Categorías
      </button>
      <button 
        (click)="setActiveView('brands')"
        [ngClass]="{
          'bg-purple-600 text-white shadow-md': activeView() === 'brands',
          'bg-gray-100 text-gray-600 hover:bg-gray-200': activeView() !== 'brands'
        }"
        class="flex-1 p-2 rounded-md font-semibold text-sm transition-all duration-200 ease-in-out flex items-center justify-center gap-2">
        <fa-icon [icon]="faStar"></fa-icon>
        Marcas
      </button>
    </div>

    <!-- Contenedor deslizable para las vistas -->
    <div class="relative flex-grow overflow-hidden">

      <!-- Vista de Categorías -->
      @if (activeView() === 'categories') {
        <div class="absolute w-full h-full transition-transform duration-300 ease-in-out"
             [ngClass]="{'translate-x-0': !currentCategory(), '-translate-x-full': currentCategory()}">
          <div class="p-4 h-full overflow-y-auto">
            <h2 class="text-xl font-bold text-purple-700 mb-4">Categorías</h2>
            <ul class="space-y-3">
              @for (category of categories(); track category.category) {
                <li (click)="selectCategory(category)" class="flex items-center justify-between p-3 bg-gray-50 hover:bg-purple-100 rounded-lg cursor-pointer transition-colors">
                  <span class="flex items-center font-medium text-gray-800">
                    <fa-icon [icon]="faCopyright" class="mr-3 text-purple-600"></fa-icon>
                    {{ category.category }}
                  </span>
                  <fa-icon [icon]="faChevronRight" class="text-gray-400"></fa-icon>
                </li>
              }
            </ul>
          </div>
        </div>

        <!-- Vista de Subcategorías -->
        <div class="absolute w-full h-full transition-transform duration-300 ease-in-out"
             [ngClass]="{'translate-x-0': currentCategory(), 'translate-x-full': !currentCategory()}">
          @if (currentCategory(); as selectedCat) {
            <div class="p-4 h-full overflow-y-auto">
              <button (click)="goBack()" class="mb-4 flex items-center text-purple-600 hover:text-purple-800 font-semibold">
                <fa-icon [icon]="faArrowLeft" class="mr-2"></fa-icon>
                Volver
              </button>
              <h2 (click)="onSelectCategory(selectedCat.category)" class="text-xl font-bold text-purple-700 mb-4 cursor-pointer hover:underline">
                {{ selectedCat.category }}
              </h2>
              <ul class="space-y-2">
                @for (sub of selectedCat.subCategories; track sub) {
                  <li (click)="onSelectSubcategory(sub)" class="p-3 bg-gray-50 hover:bg-purple-100 rounded-lg cursor-pointer transition-colors text-gray-700">
                    {{ sub }}
                  </li>
                } @empty {
                  <li class="p-2 text-gray-500">No hay subcategorías disponibles.</li>
                }
              </ul>
            </div>
          }
        </div>
      }

      <!-- Vista de Marcas -->
      @if (activeView() === 'brands') {
        <div class="absolute w-full h-full p-4 overflow-y-auto">
          <h2 class="text-xl font-bold text-purple-700 mb-4">Marcas</h2>
          <ul class="space-y-3">
            @for (brand of brands(); track brand.name) {
              <li (click)="onSelectBrand(brand.name)" class="flex items-center justify-between p-3 bg-gray-50 hover:bg-purple-100 rounded-lg cursor-pointer transition-colors">
                <span class="flex items-center font-medium text-gray-800 gap-3">
                  <img class="h-8 object-contain w-10" src="https://advanceit.co/assets/logos/{{ brand.name | lowercase }}.png" alt="logo {{ brand.name | titlecase }}">
                  {{ brand.name | titlecase }}
                </span>
                <span class="px-3 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-700">
                  {{ brand.quantity }}
                </span>
              </li>
            }
          </ul>
          <p (click)="onRequestBrand()" class="text-center text-gray-500 mt-4 text-xs underline hover:text-purple-500 hover:cursor-pointer">
            Quiero una marca que no está aquí
          </p>
        </div>
      }
    </div>
  </div>
</div>
