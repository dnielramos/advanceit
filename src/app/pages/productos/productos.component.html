<section class="min-h-[80vh] bg-white">

  <!-- Buscador principal -->
  <app-buscador-principal (showCategoriesMenu)="onMenucategories()"></app-buscador-principal>

  <!-- t+item de carrito -->
  <div *ngIf="cartItemCount > 0"
    class="fixed flex justify-center bottom-2 rounded-tl-xl rounded-bl-xl right-0 md:left-auto bg-purple-500 text-white animate__animated animate__fadeInRight shadow-lg w-18 h-15 z-10">
    <a routerLink="/productos/cart" class="relative flex items-center justify-center w-full h-full">
      <span
        class="p-2 absolute top-2 right-2 bg-purple-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
        {{ cartItemCount }}
      </span>
      <fa-icon [icon]="faShoppingCart" class="text-xl md:text-2xl "></fa-icon>
    </a>
  </div>

  <lib-toastify-toast-container></lib-toastify-toast-container>

  <div *ngIf="createUser" class="bg-black/60 backdrop-blur-sm fixed top-0 z-50 w-full h-full overflow-hidden"
    (click)="onOutregister()">
    <app-create-user></app-create-user>
  </div>

  <app-slider-product></app-slider-product>

  <h1 class="text-center text-gray-900 font-oswald text-4xl my-4">
    Productos Destacados
  </h1>

  <div class="relative px-8 py-2 bg-purple-50 rounded-2xl m-2 scroll-purple">
    <!-- Botón retroceder -->
    <button (click)="scrollFavorites('left')"
      class="absolute left-2 top-1/2 -translate-y-1/2 z-10 bg-purple-100 rounded-full p-2 shadow-md hover:bg-gray-100">
      <fa-icon [icon]="faChevronLeft"></fa-icon>
    </button>

    <!-- Contenedor de productos favoritos -->
    <section #favoritesContainer class="flex max-w-screen overflow-x-auto my-4 gap-4 rounded-md scroll-smooth">
      @for (item of productosFavorites; track $index) {
      <app-product-advance (agregarAlCarrito)="onComprarProductos()" [producto]="item"></app-product-advance>
      }
    </section>

    <!-- Botón avanzar -->
    <button (click)="scrollFavorites('right')"
      class="absolute right-2 top-1/2 -translate-y-1/2 z-10 bg-purple-100 rounded-full p-2 shadow-md hover:bg-gray-100">
      <fa-icon [icon]="faChevronRight"></fa-icon>
    </button>
  </div>

  <app-brand-slider></app-brand-slider>

  <h1 class="text-center text-gray-900 text-4xl font-extrabold mt-2 my-4">
    Productos Comprados recientemente
  </h1>

  <!-- <section class="flex my-2 gap-2 p-4 m-4 rounded-md">
    <app-product-vertical (agregarAlCarrito)="addToCart($event)"
      [producto]="productosFavorites[2]"></app-product-vertical>
  </section>
  <section class="flex my-4 gap-2 p-4 m-4 rounded-md">
    <app-product-vertical (agregarAlCarrito)="addToCart($event)" [producto]="productosFavorites[5]"
      [imagenIzquierda]="false"></app-product-vertical>
  </section>
  <section class="flex my-4 gap-4 p-4 m-4 rounded-md">
    <app-product-vertical (agregarAlCarrito)="addToCart($event)"
      [producto]="productosFavorites[4]"></app-product-vertical>
  </section>
  <section class="flex my-4 gap-4 p-4 m-4 rounded-md">
    <app-product-vertical (agregarAlCarrito)="addToCart($event)" [producto]="productosFavorites[3]"
      [imagenIzquierda]="false"></app-product-vertical>
  </section> -->

  <h1 class="text-center text-gray-900 text-4xl font-extrabold my-4">
    Distribuidores autorizados de las mejores marcas
  </h1>

  <app-certificate-slider></app-certificate-slider>
  <app-brand-slider></app-brand-slider>

  <app-team-form-lite></app-team-form-lite>

  <h1 class="text-center sticky top-2 text-gray-900 text-4xl font-extrabold my-4">
    Todos los productos
  </h1>
  <!-- productos -->
  <app-grid-products-store (añadirAlCarrito)="addToCart($event)"
    [productos]="filteredProducts()"></app-grid-products-store>

  <!-- componente de categorias -->
  <div *ngIf="menuCategories" class="bg-black/50 fixed top-0 z-50 w-full h-full flex overflow-hidden"
    (click)="onMenucategories()">
    <app-category-menu></app-category-menu>
    <div (click)="onMenucategories()" class="p-4 text-gray-50 font-bold text-2xl">
      <svg xmlns="http://www.w3.org/2000/svg" width="1.25em" height="1em" viewBox="0 0 640 512">
        <path fill="currentColor"
          d="M17.89 123.62L5.51 142.2c-14.2 21.3 1 49.8 26.59 49.8h74.26ZM576 413.42V224h-64v140l-128-99v-41h-53.08l-41.4-32H608c25.5 0 40.7-28.5 26.59-49.8l-85.29-128A32.18 32.18 0 0 0 522.6 0H117.42a31.87 31.87 0 0 0-26.61 14.2l-10.66 16L45.46 3.38A16 16 0 0 0 23 6.19L3.37 31.46a16 16 0 0 0 2.81 22.45l588.35 454.72a16 16 0 0 0 22.47-2.82l19.64-25.26a16 16 0 0 0-2.81-22.45ZM320 384H128V224H64v256a32 32 0 0 0 32 32h256a32 32 0 0 0 32-32v-73.41l-64-49.47Z" />
      </svg>
      <p class="text-xs">Cerrar</p>
    </div>
  </div>


  <div *ngIf="comprarProductos" class="bg-black/50 fixed top-0 z-50 w-full h-full flex overflow-hidden">
    <app-info-login *ngIf="comprarProductos" (close)="onComprarProductos()" (loginAction)="handleLogin()"
      (createAction)="handleCreate()">
    </app-info-login>
  </div>

  <app-footer></app-footer>
</section>

